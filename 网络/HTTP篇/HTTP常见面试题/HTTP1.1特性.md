### HTTP/1.1 的优点有哪些？

HTTP 最突出的优点是「简单、灵活和易于扩展、应用广泛和跨平台」。

_1. 简单_

- HTTP 报文格式简洁，由 `header` 和 `body` 组成。
- 头部信息采用简单的 `key-value` 文本形式，易于理解和调试，降低了学习和使用门槛。

_2. 灵活和易于扩展_

HTTP 协议里的各类请求方法、URI/URL、状态码、头字段等每个组成要求都没有被固定死，都允许开发人员**自定义和扩充**。

同时 HTTP 由于是工作在应用层（ `OSI` 第七层），则它**下层可以随意变化**，比如：

- HTTP 的请求方法、URI、状态码、头字段等都可以自定义和扩展，这使得协议本身具有很强的适应性。
- 作为应用层协议，它的底层传输协议可以灵活替换，例如：
    - **HTTPS** 在 HTTP 和 TCP 之间增加了 SSL/TLS 安全层。
    - **HTTP/1.1** 和 **HTTP/2.0** 基于 TCP 协议，而 **HTTP/3.0** 则改用了 UDP 协议。

_3. 应用广泛和跨平台_

互联网发展至今，HTTP 的应用范围非常的广泛，从台式机的浏览器到手机上的各种 APP，从看新闻、刷贴吧到购物、理财、吃鸡，HTTP 的应用遍地开花，同时天然具有**跨平台**的优越性。

### [#](https://xiaolincoding.com/network/2_http/http_interview.html#http-1-1-%E7%9A%84%E7%BC%BA%E7%82%B9%E6%9C%89%E5%93%AA%E4%BA%9B)HTTP/1.1 的缺点有哪些？

HTTP 协议里有优缺点一体的**双刃剑**，分别是「无状态、明文传输」，同时还有一大缺点「不安全」。

_1. 无状态双刃剑_

- **优点**：服务器不记录 HTTP 请求的状态，无需额外资源来存储状态信息，减轻了服务器负担，提升了服务效率。
    
- **缺点**：对于需要关联状态的一系列操作（如登录、添加购物车、下单等），服务器无法识别不同请求之间的关联性，每次请求都需要重复验证身份信息，这在用户体验上会带来不便。
    
- **解决方案**：通过 **`Cookie`** 技术，服务器可以在响应中下发“小贴纸”（即 `Cookie`），客户端在后续请求中携带这个“小贴纸”，服务器就能识别用户身份。

相当于，**在客户端第一次请求后，服务器会下发一个装有客户信息的「小贴纸」，后续客户端请求服务器的时候，带上「小贴纸」，服务器就能认得了了**，

![Cookie 技术](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/14-cookie%E6%8A%80%E6%9C%AF.png)

_2. 明文传输双刃剑_

- **优点**：数据以明文形式传输，方便开发者使用抓包工具（如 Wireshark）进行调试和排查问题。
    
- **缺点**：明文传输使得所有信息都暴露在网络上，在传输过程中很容易被窃听，用户的敏感信息（如账号密码）存在泄漏风险。

![](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/15-%E4%BD%A0%E5%8F%B7%E6%B2%A1%E4%BA%86.png)

_3. 不安全_

HTTP 比较严重的缺点就是不安全：

- 通信使用明文（不加密），内容可能会被窃听。比如，**账号信息容易泄漏，那你号没了。**
- 不验证通信方的身份，因此有可能遭遇伪装。比如，**访问假的淘宝、拼多多，那你钱没了。**
- 无法证明报文的完整性，所以有可能已遭篡改。比如，**网页上植入垃圾广告，视觉污染，眼没了。**

**解决方案**：通过引入 **`SSL/TLS`** 层，升级为 **`HTTPS`** 协议，从而解决上述安全问题。

### [#](https://xiaolincoding.com/network/2_http/http_interview.html#http-1-1-%E7%9A%84%E6%80%A7%E8%83%BD%E5%A6%82%E4%BD%95)HTTP/1.1 的性能如何？

HTTP 协议是基于 **TCP/IP**，并且使用了「**请求 - 应答**」的通信模式，所以性能的关键就在这**两点**里。

_1. 长连接_

- **问题**：HTTP/1.0 每次请求都需要新建 TCP 连接，带来了额外的连接建立和断开开销。
    
- **解决**：HTTP/1.1 引入了**长连接**，只要任意一端没有明确断开，TCP 连接就会保持。这减少了重复建立和断开连接的开销，减轻了服务器负载。

![短连接与长连接](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/16-%E7%9F%AD%E8%BF%9E%E6%8E%A5%E4%B8%8E%E9%95%BF%E8%BF%9E%E6%8E%A5.png)

当然，如果某个 HTTP 长连接超过一定时间没有任何数据交互，服务端就会主动断开这个连接。

_2. 管道网络传输_

- **工作原理**：在同一个 TCP 连接上，客户端可以连续发送多个请求，而无需等待上一个请求的响应。
    
- **缺点**：尽管请求可以并行发送，但服务器必须按顺序处理和响应。如果前面的请求处理时间过长，会阻塞后续请求的响应，导致 **“队头阻塞”**。
    
- **注意**：尽管 HTTP/1.1 提供了管道化技术，但浏览器通常没有默认开启，因此在实际应用中并不常见。

![管道网络传输](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/17-%E7%AE%A1%E9%81%93%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93.png)

_3. 队头阻塞_

「请求 - 应答」的模式会造成 HTTP 的性能问题。为什么呢？

- **问题**：由于“请求-应答”的模式，当一个请求被阻塞时，其后续的所有请求也会被阻塞，导致客户端无法及时获取数据。
- **解决**：HTTP/2 和 HTTP/3 等后续版本主要就是为了优化 HTTP/1.1 的性能问题，尤其是队头阻塞。

![队头阻塞](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/18-%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E.png)

总之 HTTP/1.1 的性能一般般，后续的 HTTP/2 和 HTTP/3 就是在优化 HTTP 的性能。