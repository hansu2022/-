###   HTTP 是什么？

HTTP，全称是**超文本传输协议（HyperText Transfer Protocol）**。要理解它，我们可以把这个名字拆解成三个部分：

- **超文本**（HyperText）
    
- **传输**（Transfer）
    
- **协议**（Protocol）
![[Pasted image 20250922175656.png]]
_1. 「协议」_

“协议”这个概念在日常生活中很常见，比如“三方协议”和“租房协议”。这些协议都有两个共同的特点：
- **“协”**：表示有**两个或两个以上的参与者**。例如，租房协议需要你和房东共同参与。
- **“议”**：表示对参与者的一种**行为约定和规范**。例如，协议会规定租期、租金和违约责任等。

在计算机世界中，网络协议也是同样的道理。它是一组**规则和标准**，用于定义计算机之间如何进行通信。HTTP 作为一种网络协议，它使用计算机能理解的语言，为两个或多个计算机之间的**交流**（“协”）确立了**通信规范**（“议”），包括数据的格式、传输方式以及错误处理等。

**作用**：协议是网络通信的基础。它确保了不同设备和系统之间能够互相理解并正确交换数据，如果没有协议，计算机之间将无法有效地进行信息交流。

_2. 「传输」_
“传输”就是把数据从一个地方搬运到另一个地方。在 HTTP 协议中，这个简单的动作包含两层重要信息：
- **双向协议**: HTTP 是一种双向的通信协议。
    - **角色**: 一方是**请求方**（例如你的浏览器），另一方是**应答方**（例如一个网站服务器）。
    - **过程**: 请求方将数据发送给应答方，应答方接收并处理后，再将数据返回给请求方。
    - **示例**: 你用浏览器访问网站时，浏览器发送请求（A 到 B），网站返回网页数据（B 到 A），最终显示在你面前。

![请求 - 应答](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/5-%E8%AF%B7%E6%B1%82%E5%BA%94%E7%AD%94.png)

- **支持中转和接力**: 数据在请求方和应答方之间传输时，**允许中间有中转或接力**。
    - **中间人**: 就像传递纸条需要经过中间的同学，HTTP 数据包在传输过程中也会经过多个中间设备（如代理服务器）。
    - **规范**: 只要这些中间人**遵循 HTTP 协议**，他们就可以在不干扰数据传输的前提下，添加或修改一些额外信息，例如缓存数据或进行安全过滤。
        
通过对“传输”的理解，我们可以更进一步地定义 HTTP：**HTTP 是一个专门在计算机世界里，用来在两点之间传输数据的约定和规范。**
_3. 「超文本」_

“超文本”就是超越了普通文本的文本。
- **广义的“文本”**: 在 HTTP 的语境下，“文本”的含义已经扩展，不仅包括简单的字符文字，还涵盖了**图片、视频、音频和压缩包**等多种文件类型。
- **“超”的涵义**: “超”意味着它**超越了普通文本**，能够包含**超链接**，允许用户从一个文档跳转到另一个文档。
- **示例**: HTML 就是一种最常见的超文本。它本身是纯文本文件，但通过内部的标签定义了指向图片和视频等资源的链接。浏览器解析这些标签后，就可以将一个纯文本文件渲染成一个图文并茂、内容丰富的网页。

**HTTP 是一个在计算机世界里专门在「两点」之间「传输」文字、图片、音频、视频等「超文本」数据的「约定和规范」。**

> 那「HTTP 是用于从互联网服务器传输超文本到本地浏览器的协议」，这种说法正确吗？

这种说法是**不正确**的。因为也可以是「服务器< -- >服务器」，所以采用**两点之间**的描述会更准确。

###   HTTP 常见的状态码有哪些？
![[Pasted image 20250922180332.png]]
#### **1xx：提示信息**

这类状态码属于协议处理过程中的**中间状态**，主要用于表示连接或请求正在进行，实际应用中较少见。
#### **2xx：成功**
这类状态码表示服务器**成功处理了客户端的请求**，是最理想的结果。
- **200 OK**: 最常见的成功状态码，表示请求已成功处理。对于非 `HEAD` 请求，响应中通常会包含实体主体（`body` 数据）。
- **204 No Content**: 成功状态码，但与 `200 OK` 不同的是，响应中**不包含任何实体主体**。常用于服务器成功处理请求后，无需返回任何数据给客户端的场景。
- **206 Partial Content**: 成功状态码，通常用于**分块下载或断点续传**。它表示服务器只返回了请求资源的一部分内容。

---
#### **3xx：重定向**
这类状态码表示客户端请求的资源**发生了变动**，需要客户端使用新的 URL 重新发送请求。
- **301 Moved Permanently**: **永久重定向**。表示请求的资源已永久移动到新的 URL，客户端应更新其书签或链接，下次直接访问新地址。
- **302 Found**: **临时重定向**。表示请求的资源暂时在另一个 URL 上，客户端仍应使用原始 URL 进行后续访问。
- **304 Not Modified**: **缓存重定向**。此状态码不用于跳转，而是告诉客户端，请求的资源自上次访问以来**未发生修改**，客户端可以直接使用本地缓存的资源，从而避免了不必要的传输。
---

#### **4xx：客户端错误**

这类状态码表示客户端发送的请求报文有**语法或逻辑错误**，服务器无法处理。

- **400 Bad Request**: 表示客户端的请求报文存在**笼统的语法错误**，是一个通用的错误码。
- **403 Forbidden**: 表示服务器**禁止访问**该资源，但客户端的请求本身语法是正确的。这通常是由于权限问题。
- **404 Not Found**: 表示请求的资源在服务器上**不存在或未找到**。
---
#### **5xx：服务器错误**

这类状态码表示客户端的请求报文是正确的，但服务器在处理请求时**内部发生了错误**。
- **500 Internal Server Error**: 一个通用的服务器端错误码，表示服务器遇到了**未知的内部错误**，无法完成请求。
- **501 Not Implemented**: 表示服务器**不支持**客户端请求的功能或方法。
- **502 Bad Gateway**: 通常作为**网关或代理**的服务器返回的错误码。表示服务器自身工作正常，但在向后端服务器转发请求时**发生了错误**。
- **503 Service Unavailable**: 表示服务器因**过载或停机维护**等原因，暂时无法处理请求，客户端应稍后重试。

### HTTP 常见字段有哪些？

_Host_ 字段

客户端发送请求时，用来指定服务器的域名。

![](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/7-HOST%E5%AD%97%E6%AE%B5.png)

```
Host: www.A.com
```

有了 `Host` 字段，就可以将请求发往「同一台」服务器上的不同网站。

_Content-Length 字段_

服务器在返回数据时，会有 `Content-Length` 字段，表明本次回应的数据长度。

![](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/8-content-length%E5%AD%97%E6%AE%B5.png)

```
Content-Length: 1000
```

如上面则是告诉浏览器，本次服务器回应的数据长度是 1000 个字节，后面的字节就属于下一个回应了。

大家应该都知道 HTTP 是基于 TCP 传输协议进行通信的，而使用了 TCP 传输协议，就会存在一个“粘包”的问题，**HTTP 协议通过设置回车符、换行符作为 HTTP header 的边界，通过 Content-Length 字段作为 HTTP body 的边界，这两个方式都是为了解决“粘包”的问题**。具体什么是 TCP 粘包，可以看这篇文章：[如何理解是 TCP 面向字节流协议？(opens new window)](https://xiaolincoding.com/network/3_tcp/tcp_stream.html)

_Connection 字段_

`Connection` 字段最常用于客户端要求服务器使用「HTTP 长连接」机制，以便其他请求复用。

![](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/9-connection%E5%AD%97%E6%AE%B5.png)

HTTP 长连接的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。

![HTTP 长连接](https://cdn.xiaolincoding.com//mysql/other/d2b20d1cc03936332adb2a68512eb167-20230309231005893.png)

HTTP/1.1 版本的默认连接都是长连接，但为了兼容老版本的 HTTP，需要指定 `Connection` 首部字段的值为 `Keep-Alive`。

```
Connection: Keep-Alive
```

开启了 HTTP Keep-Alive 机制后， 连接就不会中断，而是保持连接。当客户端发送另一个请求时，它会使用同一个连接，一直持续到客户端或服务器端提出断开连接。

PS：大家不要把 HTTP Keep-Alive 和 TCP Keepalive 搞混了，这两个虽然长的像，但是不是一个东西，具体可以看我这篇文章：[TCP Keepalive 和 HTTP Keep-Alive 是一个东西吗？(opens new window)](https://xiaolincoding.com/network/3_tcp/tcp_http_keepalive.html)

_Content-Type 字段_

`Content-Type` 字段用于服务器回应时，告诉客户端，本次数据是什么格式。

![](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/10-content-type%E5%AD%97%E6%AE%B5.png)

```
Content-Type: text/html; Charset=utf-8
```

上面的类型表明，发送的是网页，而且编码是UTF-8。

客户端请求的时候，可以使用 `Accept` 字段声明自己可以接受哪些数据格式。

```
Accept: */*
```

上面代码中，客户端声明自己可以接受任何格式的数据。

_Content-Encoding 字段_

`Content-Encoding` 字段说明数据的压缩方法。表示服务器返回的数据使用了什么压缩格式

![](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/11-content-encoding%E5%AD%97%E6%AE%B5.png)

```
Content-Encoding: gzip
```

上面表示服务器返回的数据采用了 gzip 方式压缩，告知客户端需要用此方式解压。

客户端在请求时，用 `Accept-Encoding` 字段说明自己可以接受哪些压缩方法。

```
Accept-Encoding: gzip, deflate
```