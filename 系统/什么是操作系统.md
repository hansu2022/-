## 什么是操作系统 (OS)

**操作系统（OS）** 是连接计算机硬件和应用程序的**核心系统软件**。它就像是计算机的“总管家”，主要负责以下工作：

- **管理和控制** 所有的硬件（如CPU、内存、硬盘、I/O设备）和软件资源。
    
- **调度** 计算机的工作和资源的分配，确保高效运行。
    
- **提供服务**，让用户和其他应用程序可以轻松地使用计算机。
    

**一个核心理解：** 如果没有操作系统，你的电脑将只是一堆无法使用的硬件，你将无法运行任何应用程序，也无法与它进行任何交互。

---

## 操作系统的四大基本特征

这四个特征决定了操作系统的强大与复杂性。

- **1. 并发（Concurrency）：**
    
    - **定义：** 多个程序在**同一时间间隔内**同时执行。
        
    - 操作系统能处理和调度多个程序，使它们看起来像是在同时运行。
        
    - **区别：**
        
        - **并发：** 一段时间内，多个任务交替执行，宏观上同时进行。
            
        - **并行（Parallelism）：** **同一时刻**，多个任务真正同时执行（通常需要多核CPU支持）。
            
- **2. 共享（Sharing）：**
    
    - **定义：** 系统中的资源可以被多个并发执行的程序共同使用。
        
    - **两种共享方式：**
        
        - **互斥共享：** 一段时间内只允许一个程序访问该资源，例如打印机。这类资源被称为**临界资源**。
            
        - **同时访问：** 多个程序可以“同时”访问资源，但实际上是交替快速访问，例如硬盘文件。
            
- **3. 虚拟（Virtualization）：**
    
    - **定义：** 将一个物理实体，转化为多个逻辑上的对应物。
        
    - **例子：** 操作系统通过时间片轮转，让每个进程都感觉自己**独占了CPU**；或者通过虚拟内存，让每个程序都认为自己**独占了所有内存**。
        
- **4. 异步（Asynchrony）：**
    
    - **定义：** 进程的执行不是一次性完成的，而是以**不可预知的速度**向前推进，时走时停。
        
    - 这是因为资源有限，进程需要等待或被调度，这种不确定性就是异步。
        

---

## 操作系统的核心功能

操作系统通过以下核心功能来扮演其“管家”角色：

- **1. 资源管理（分配与回收）：**
    
    - 操作系统负责管理计算机有限的硬件资源，包括**CPU、内存、硬盘和I/O设备**。
        
    - **分配：** 例如，进行**进程调度**来决定哪个进程使用CPU；进行**内存分配**来给程序提供运行空间。
        
    - **回收：** 例如，在程序结束后，回收其占用的所有资源，如内存，并进行整理。
        
- **2. 提供服务接口：**
    
    - 操作系统将复杂的硬件操作**封装**起来，提供统一的接口——**系统调用**——供应用程序使用。
        
    - 这使得开发者可以方便地编写程序，而无需直接处理复杂的硬件细节，同时也防止了程序因错误操作而损坏硬件。
        
- **3. 管理应用程序：**
    
    - 操作系统控制程序的整个**生命周期**，包括：
        
        - 为新程序分配资源、配置运行环境。
            
        - 在程序运行时进行**调度**。
            
        - 在程序结束后**回收**其占用的资源。
            
- **4. 内核功能：**
    
    - **内核**是操作系统的核心部分，它实现了最基本、最重要的功能：
        
        - **进程/线程管理：** 决定哪个进程/线程何时使用CPU。
            
        - **内存管理：** 负责内存的分配和回收。
            
        - **硬件通信：** 充当应用程序和硬件之间的桥梁。
            
        - **系统调用接口：** 提供应用程序访问内核服务的途径。
            

---

## 理解操作系统的两个角色

- **1. 管理者：**
    
    - 操作系统是整个计算机系统的**总指挥**。
        
    - 它管理着CPU、内存、外存、I/O设备，并保障自身的**健壮性**（鲁棒性）和安全性。
        
- **2. 魔术师：**
    
    - 操作系统通过**虚拟化**技术，为用户和程序创造一种“假象”。
        
    - 例如，它让每个进程都感觉自己**独占了CPU和所有内存**，而实际上它们只是在共享这些资源。
        

---

## 用户程序与操作系统的关系

- **核心关系：** 用户程序与操作系统是**相互依赖、相互调用**的关系。
    
- **操作系统的角度：** 操作系统是计算机启动后第一个运行的软件。所有应用程序都运行在它提供的**受控环境**中，并接受其管理。
    
- **应用程序的角度：** 应用程序通过**系统调用**来请求操作系统提供的服务，从而完成自身的功能。