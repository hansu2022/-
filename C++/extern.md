C++全局变量的作用范围仅限于当前的文件，但同时C++也支持分离式编译，允许将程序分割为若干个文件被独立编译。需要在文件间共享变量数据，这里extern就发挥了作用。

`extern` 用于指示变量或函数的定义在另一个源文件中，并在当前源文件中声明。  
说明该符号具有外部链接(external linkage)属性。

也就是告诉编译器:这个符号在别处定义了，你先编译，到时候链接器会去别的地方找这个符号定义的地址。

#### 1.符号的声明与定义

声明是指告诉编译器某个符号的存在，在程序变量表中记录类型和名字，而定义则是指为该符号分配内存空间或实现其代码逻辑。

**凡是没有带extern的声明同时也都是定义**。  
而对函数而言，带有{}是定义，否则是声明。如果想声明一个变量而非定义它，就在变量名前添加关键字`extern`，且不要显式的初始化变量。
```cpp
// 声明
extern int global_var;

// 定义
int global_var = 42;
```

```cpp
// 声明
int sum(int a, int b);

// 定义
int sum(int a, int b) {
  return a + b;
}
```

### 2.C/C++ 中链接属性

#### 外部链接
外部链接的符号可以在不同的源文件之间共享，并且在整个程序执行期间可见。全局变量和函数都具有外部链接

#### 内部链接
内部链接的符号只能在当前源文件内部使用，不能被其他源文件访问。用 `static` 修饰的全局变量和函数具有内部链接

#### 无链接
无链接的符号只能在当前代码块（函数或代码块）内部使用，不能被其他函数或代码块访问。用 `const` 或 `constexpr` 修饰的常量具有无链接属性（ 通常情况下编译器是不会为const对象分配内存，也就无法链接）

### 外部 C 链接(External C Linkage)
外部 C 链接的符号与外部链接类似，可以在不同的源文件之间共享，并且在整个程序执行期间可见。
它们具有 C 语言的名称和调用约定，可以与 C 语言编写的代码进行交互。
在 C++ 中，可以用 `extern "C"` 关键字来指定外部 C 链接，从而使用一些 C 的静态库。


### 3.extern作用
```cpp
//fileA.cpp
int i = 1;         //声明并定义全局变量i

//fileB.cpp
extern int i;    //声明i，链接全局变量

//fileC.cpp
extern int i = 2;        //错误，多重定义
int i;                    //错误，这是一个定义
						//凡是没有带extern的声明同时也都是定义

main()
{
    extern int i;        //正确
    int i = 5;            //正确，新的局部变量i;
}
```
`fileA.cpp` 提供了全局变量 `i` 的**唯一一次定义**，为其分配了内存。`fileB.cpp` 使用 `extern` 对其进行了**声明**，告诉编译器这个变量存在于别处，这不会分配内存，只是为了引用。

`int i = 5;` 则创建了一个**同名的局部变量**，它会**遮蔽**同名的全局变量，这是局部作用域优先的规则