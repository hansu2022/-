#### 全局变量

全局变量定义在所有函数外面，**整个程序都能访问**，它从程序启动时就存在。

若在其他文件中使用，需要用[extern关键字](extern)声明，**默认也会被初始化为0**，和静态局部变量一样存储在**静态存储区**。

若用"[static](static)"修饰的全局变量，**仅限当前文件**使用，避免与其他文件同名变量冲突。

全局变量是那种“**很多地方都要用**”的数据，比如配置参数、程序状态什么的，放在最外面，全局共享。但不建议乱用，容易让程序变得混乱、难维护，非必要别用它，**用的话要写清楚、注释好**。
```cpp
  #include <iostream>
  using namespace std;
  int globalVar = 100;  // 全局变量
  void modifyGlobal() {
      globalVar += 50;
      cout << "Modified global: " << globalVar << endl;
  }
  int main() {
      cout << "Initial global: " << globalVar << endl;  // 输出: Initial global: 100
     modifyGlobal();  // 输出: Modified global: 150
     return 0;
 }
```
#### 静态局部变量

在函数内部定义，使用static关键字声明，比如"static int count"，其生命周期不随函数调用结束而销毁，可**保留上次的值**。

第一次调用函数时初始化后，之后每次调用都**不会重新初始化，而是保持上次的值**，这种变量被放在一个特殊的内存区域（**静态存储区**），所以函数执行完也不会被销毁。

它**默认会被自动初始化为0**，适合用来做计数器或者缓存一些需要在多次函数调用之间保持的数据。

静态局部变量适合在一个函数里需要“**记住上一次的值**”的情况，比如要在函数里做一个计数器、记录某个初始化状态，只想执行一次，就加个 static，函数每次运行，它都能记得上一次的结果。

```cpp
  #include <iostream>
  using namespace std;
  void counter() {
      static int count = 0;  // 静态局部变量
      count++;
      cout << "Static local count: " << count << endl;
  }
  int main() {
      counter();  // 输出: Static local count: 1
     counter();  // 输出: Static local count: 2
     return 0;
 }

```
#### 局部变量

在函数或代码块内部定义。这种变量的特点是“**随用随弃**”，随函数调用创建、执行结束后销毁，存储在**栈**内存中，存取速度很快，如果不初始化，它的值会是随机的（这点和全局变量、静态变量不同）。

需要注意的是，如果局部变量和全局变量同名，在**函数内部**会优先使用**局部变量**，相当于暂时"**屏蔽**"了同名的全局变量。

局部变量最适合存放一些**临时数据**，比如循环计数器、函数内部的中间计算结果等，用完就自动释放，**不会占用额外内存**。

局部变量**最常用**，能用就用它，它只在当前函数里生效，用完就销毁，**最干净、安全、不容易出错**，处理临时数据、普通运算，直接写局部变量就够了。
```cpp
  void calculate() {
      int localVar = 5;  // 局部变量
      localVar *= 2;
      cout << "Local variable: " << localVar << endl;  // 输出: Local variable: 10
      // localVar 在此处销毁
  }
  int main() {
      calculate();
      // cout << localVar;  // 错误：局部变量不可见
     return 0;
 }

```
![[Pasted image 20250920090342.png]]
![[Pasted image 20250920090346.png]]
面试回答：
C++中的变量可以根据其**生命周期**、**作用域**和**存储位置**分为三类。
**全局变量**定义在所有函数之外，其生命周期贯穿整个程序，存储在静态存储区，整个程序都能访问，若在其他文件中使用需要用 `extern` 关键字声明，且默认初始化为0。全局变量通常用于需要在多处共享的数据，比如程序配置或状态，但因为容易导致程序混乱和难以维护，应尽量少用。如果必须使用，可以加 `static` 关键字将其作用域限制在当前文件内，避免与其他文件中的同名变量
冲突。

**静态局部变量**定义在函数内部并用 `static` 关键字修饰，它同样存储在静态存储区，其生命周期也是整个程序，但作用域只限定在当前函数内。它只在第一次函数调用时被初始化，之后会保留上次的值，不会随函数结束而销毁，这让它非常适合用来实现函数调用次数计数器或作为缓存。

**局部变量**是最常用、最安全的变量类型，它定义在函数或代码块内部，随函数调用创建，在函数结束时立即销毁，存储在栈内存中，如果不初始化其值是随机的。局部变量最适合存放临时数据，因为它只在当前函数内有效，用完自动释放，不会影响到程序其他部分，并且如果与全局变量同名，在函数内部会优先使用局部变量。