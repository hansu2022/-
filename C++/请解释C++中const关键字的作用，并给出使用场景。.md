
#### 简要回答

1. 修饰普通变量时：指向的变量的值不能修改。
2. 修饰指针时：分为两种情况：如果是 `const int *`代表的是常量指针，则该指针**指向的值**不可以改变；如果是`int * const`，代表的是指针常量，则该指针的**指向**不可以改变。
3. 修饰函数时：const修饰函数是C++的一个扩展，它的目的是为了保证类的封装性。在该类的成员函数后加上const之后，该**函数不能修改该类的成员变量**。
4. 修饰函数传参时：修饰的参数在函数内不能修改。

#### 注意事项

1. 因为const修改的值不能修改，所以一开始就需要初始化。
2. const只在该文件生效，如果要多个文件共享，需加上**extern**关键字。
### **C++ `const` 关键字：深度解析**

`const` 在 C++ 中是一个非常重要的关键字，它代表“常量”或“只读”。它的核心作用是**限定一个变量或对象不能被修改**，从而提高代码的安全性和可读性。
#### **1. `const` 修饰基本类型变量**

当 `const` 修饰一个变量时，该变量就成为了一个只读的常量，其值必须在定义时进行初始化，并且之后不能被修改。

```cpp
const int a = 10;
// a = 20; // 编译错误：不能修改 const 变量
```

重要补充：
const 的只读属性是编译器层面的保证。虽然可以通过 const_cast 和指针强制修改其值，但这种行为是不推荐的，并且可能导致未定义行为。这是因为编译器会进行优化，直接用常量值替换变量名，导致你通过指针修改的值可能无法生效。

---
#### **2. `const` 修饰指针**

`const` 在指针修饰中位置的不同，其含义也完全不同，这是初学者最容易混淆的地方。理解其规则的关键在于：**`const` 永远修饰离它最近的类型**。
- **`const int* p` (或 `int const* p`)底层const：指向常量的指针**
    - **含义**：**指针所指的值是常量**，不能通过该指针修改其值。
    - **指针本身**：可以改变指向，即可以指向另一个变量。
    
    ```cpp
    const int val = 10;
    const int* p = &val;
    // *p = 20; // 编译错误：不能通过 p 修改值
    
    int another_val = 20;
    p = &another_val; // 合法：可以改变 p 的指向
    ```
    
- 顶层const **`int* const p`：常量指针**
    
    - **含义**：**指针本身是常量**，一旦初始化，不能改变指向。
        
    - **指针所指的值**：可以通过该指针修改其值。

    ```cpp
    int val = 10;
    int* const p = &val; // 指针 p 本身是常量
    *p = 20; // 合法：可以修改 p 指向的值
    // p = nullptr; // 编译错误：不能改变 p 的指向
    ```
    
- **`const int* const p`：指向常量的常量指针**
    
    - **含义**：**指针本身和其指向的值都是常量**，两者都不能修改。
        

---

#### **3. `const` 修饰函数参数**

当 `const` 修饰函数参数时，它保证函数内部**不会修改该参数**。这是一种很好的编程实践，尤其是在参数以**引用**或**指针**方式传递时，可以防止无意的修改。
```cpp
void print_value(const int& value) {
    // value = 20; // 编译错误：不能修改 const 引用
    std::cout << value << std::endl;
}
```

---

#### **4. `const` 修饰成员函数**

在 C++ 中，`const` 可以放在成员函数的参数列表后，表示这是一个**常量成员函数**。

- **含义**：这个函数不会修改**对象的任何非静态成员变量**。
    
- **作用**：允许 `const` 对象调用该函数。因为一个 `const` 对象只能保证其状态不被改变，如果它调用的成员函数可能会修改其状态，就会破坏这种保证。
    
```cpp
class MyClass {
public:
    int get_value() const { // const 成员函数
        // m_value = 20; // 编译错误：不能修改成员变量
        return m_value;
    }
private:
    int m_value = 10;
};

const MyClass obj;
obj.get_value(); // 合法：const 对象可以调用 const 成员函数
```

**注意事项：**

- `const` 成员函数不能调用非 `const` 成员函数，因为非 `const` 函数可能会修改对象的状态。
    
- 如果一个成员变量需要在 `const` 成员函数中修改（例如，缓存），可以使用 `mutable` 关键字来修饰该变量。
    

---

#### **5. `const` 修饰函数返回值**

当 `const` 修饰函数返回值时，表示函数返回的值是一个**只读**的常量，不能被修改。这主要用于防止对返回值的误操作。
```cpp
const int get_const_value() {
    return 10;
}

int main() {
    const int val = get_const_value();
    // val = 20; // 编译错误：不能修改 const 变量
    return 0;
}
```